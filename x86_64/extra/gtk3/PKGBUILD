pkgname=gtk3
pkgver=3.24.30+90+g20be04f7ac
pkgrel=1
depends=(libxrandr wayland mesa)
arch=('x86_64')
makedepends=(gobject-introspection git glib2 meson wayland-protocols)
source=(git+https://gitlab.gnome.org/GNOME/gtk.git)

prepare() {
	cd gtk
}

build() {
	CFLAGS+=" -DG_DISABLE_CAST_CHECKS"
	meson gtk build				\
	-D colord=yes				\
	-D man=false				\
	--prefix=/usr
	
	meson compile -C build
}

package() {
	meson install -C build --destdir $pkgdir
}
