pkgname=appstream
pkgver=0.15.2
pkgrel=1
arch=(x86_64)
depends=(curl librsvg yaml libxmlb libsoup)
makedepends=(meson xmlto gobject-introspection gtk-doc qt5 itstool vala gperf)
source=(https://www.freedesktop.org/software/appstream/releases/AppStream-$pkgver.tar.xz
        update-appstream-cache.hook)

build() {
    meson build AppStream-$pkgver \
    --prefix=/usr \
    --libexecdir=lib \
    -Dqt=true \
    -Dvapi=true \
    -Dcompose=true

    meson compile -C build
}

package() {
	meson install --destdir "$pkgdir" -C build

	install -Dm644 update-appstream-cache.hook "$pkgdir"/usr/share/libalpm/hooks/90-update-appstream-cache.hook
}
