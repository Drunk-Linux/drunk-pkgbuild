pkgname=binutils
pkgver=2.36.1
pkgrel=1
arch=('aarch64')
depends=(glibc)
source=(https://ftp.gnu.org/gnu/binutils/$pkgname-$pkgver.tar.xz)

build() {
    cd $pkgname-$pkgver

    mkdir -vp build
    cd build

    ../configure \
    --host=aarch64-linux-gnu \
    --prefix=/usr       \
    --enable-gold       \
    --enable-ld=default \
    --enable-plugins    \
    --enable-shared     \
    --disable-werror    \
    --enable-64-bit-bfd \
    --enable-multilib   \
    --with-lib-path=/lib:/usr/lib:/usr/lib32

    make tooldir=/usr
}

package() {
    cd $pkgname-$pkgver/build

    make tooldir=/usr DESTDIR=$pkgdir install -j1
}
