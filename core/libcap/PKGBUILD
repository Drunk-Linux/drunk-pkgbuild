# Description: Implements the user-space interfaces to the POSIX 1003.1e capabilities available in Linux kernels
# URL:         
# Maintainer:  Emmett1, emmett1 dot 2miligrams at gmail dot com
# Depends on:  

pkgname=libcap
pkgver=2.50
pkgrel=1
arch=('x86_64')
source=(https://www.kernel.org/pub/linux/libs/security/linux-privs/libcap2/$pkgname-$pkgver.tar.xz)

build() {
        cd $pkgname-$pkgver

        sed -i '/install.*STALIBNAME/d' libcap/Makefile

        make
}

package() {
	cd $pkgname-$pkgver
        make RAISE_SETFCAP=no lib=lib prefix=/usr DESTDIR=$pkgdir install
        chmod -v 755 $pkgdir/usr/lib/libcap.so

        mkdir -p $pkgdir/lib
        mv -v $pkgdir/usr/lib/libcap.so.* $pkgdir/lib
        ln -sfv ../../lib/$(readlink $pkgdir/usr/lib/libcap.so) $pkgdir/usr/lib/libcap.so
}
