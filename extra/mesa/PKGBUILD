# Description: Utilities to administer Access Control Lists, which are used to define more fine-grained discretionary access rights for files and directories
# URL:         http://savannah.nongnu.org/projects/acl
# Maintainer:  Emmett1, emmett1 dot 2miligrams at gmail dot com
# Depends on:  

pkgname=mesa
pkgver=21.2.1
pkgrel=1
arch=('x86_64')
depends=('libxcb' 'fontconfig' 'libdrm' 'libx11' 'libxext' 'libxfixes')
source=(https://mesa.freedesktop.org/archive/$pkgname-$pkgver.tar.xz)

build() {
        cd $pkgname-$pkgver

	sed '1s/python/&3/' -i bin/symbols-check.py

	mkdir -p build && cd build

	meson			\
	--prefix=/usr		\
	--buildtype=release	\
	-Dgallium-nine=false	\
	-Dglx=dri		\
	-Dvalgrind=disabled	\
	-Dlibunwind=disabled	\
	..

	unset GALLIUM_DRV DRI_DRIVERS

	ninja
}

package() {
	cd $pkgname-$pkgver/build
	DESTDIR=$pkgdir ninja install
}
