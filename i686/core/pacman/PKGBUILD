pkgname=pacman
pkgver=v6.0.1
pkgrel=1
arch=('i686')
depends=(glibc libarchive nettle curl gpgme openssl bz2 libxml2)
source=(https://gitlab.archlinux.org/$pkgname/$pkgname/-/archive/$pkgver/$pkgname-$pkgver.tar.gz)

build() {
        cd $pkgname-$pkgver

	meson   --prefix=/usr			\
		-D doxygen=enabled		\
		-D scriptlet-shell=/bin/bash	\
		-D ldconfig=/usr/bin/ldconfig	\
		-D crypto=nettle		\
		build

#	exit

	ninja -C build
}

package() {
	cd $pkgname-$pkgver
	
	mkdir -vp $pkgdir
	export DESTDIR=$pkgdir/
	
	ninja -C build install

	# copy right .conf
	#cp -f ../../pacman.conf $pkgdir/etc/pacman.conf
	mkdir -p $pkgdir/etc/pacman.d
	touch $pkgdir/etc/pacman.d/mirrorlist
}
